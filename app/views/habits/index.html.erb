<div class='large-12 columns'>
  <h5>Welcome, <%= current_user.name %></h5>
  <% if !@github_user %>
    <h4>Add your Github Username to Track Your Github Stats</h4>
    <%= form_tag(add_github_path, method: :post) do %>
      <%= label_tag "Github Username" %>
      <%= text_field_tag :name %>
      <%= submit_tag "Add Github Username" %>
    <% end %>
  <% else %>
    <h2 id="github-stats-toggle">Github Stats</h2>
    <div style="display:none" id="github-stats">
    Name: <%= @github_user.name %><br/>
    Username: <%= current_user.github_name %><br/>
    Your Repos:<br/> <% @github_user.rels[:repos].get.data.each do |repo| %>
                  <li><%= repo.name %></li>
                <% end %>
    </div>
  <% end %>

  <% unless current_user.habits.empty? %>
    <h2>Your Habits</h2>
    <div class="habit-list">
    <%= form_tag(habit_update_notification_path, method: :post, remote: true) do %>
      <div class="grid-sizer">
      <% current_user.habits.each do |habit| %>
        <div class='habit-wrapper'>
          <div class="inpre"></div>
          <div class="habit_content">
            <%= habit.name %><br/>
            <%= link_to "More Information", habit_path(habit) %><br/>
            <%= link_to "Delete Habit", habit_path(habit), confirm: "Are you sure?", method: 'delete' %><br/>
            Notifications:
            <%= check_box_tag "notification_ids[]", habit.id, habit.notifications, class: 'notifications_check' %>
          </div>
          <div class="inpos"></div>
        </div>
      <% end %>
      </div>
    </div>
    <%= submit_tag "Update Notifications", id: 'update-notifications' %>
    <% end %>
  <% end %>
<br/>
  <div id="habit-button">
    <%= button_tag "Create Custom Habit", id: 'create-custom' %>
  </div>

  <div style="display:none" id="create-habit-form">
    <%= form_tag(habits_path, method: :post, remote: true) do %>
      <%= label_tag :title, "Habit" %>
      <%= text_field_tag :title %><br />

      <%= submit_tag "Create Habit" %>
    <% end %>
  </div>
</div>

<%= form_tag(user_path(current_user), method: :patch) do %>
  <%= label_tag :phone, "Phone Number:" %>(Current Number: <%= current_user.phone %>)
  <%= text_field_tag :phone %><br />

  <%= submit_tag "Create" %>
<% end %>

<script src="assets/habit_scripts.js"></script>
<script src="/assets/masonry.pkgd.min.js"></script>
<script src="/assets/imagesloaded.pkgd.min.js"></script>

<script>
  var container = document.querySelector('.habit-list');
  var msnry = new Masonry( container, {
    columnWidth: ".grid-sizer",
    itemSelector: '.habit-wrapper'
  });
  imagesLoaded( container, function() {
    msnry.layout();
  });
</script>
